name: Unpack Recovery/Boot Image
on:
  push:
    branches:
    - ' tiare-boot-k4.9'
jobs:
  test:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2
    - name: Unpacking Image
      run: |
        wget -q https://raw.githubusercontent.com/DroidDumps/phoenix_firmware_dumper/main/utils/unpackboot.sh
        wget https://ghostmirror.hitesh920.workers.dev/tiare-boot-k4.9.img >/dev/null
        # bash wgetgdrive.sh ID file_name
        # export RECOVERYTAR=$(tar -tzf *.tgz | grep recovery.img) && tar -vxf *.tgz $RECOVERYTAR
        # export RECOVERYZIP=$(zip -sf *zip | grep recovery.img) && unzip *.zip $RECOVERYZIP
        export RECOVERYIMAGE=$(find . -type f -name *img)
        bash unpackboot.sh $RECOVERYIMAGE unpacked
        git config --global user.email "dumperbot@techyminati.com"
        git config --global user.name "Minati Dump CI"
        git add .
        git commit -m "Unpacked" >/dev/null
        git push origin HEAD:msm8937-test
